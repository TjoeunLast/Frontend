<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í™”ë¬¼ ë“±ë¡ - ë°”ë¡œíŠ¸ëŸ­</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <style>
    /* =========================================
       1. ë””ìì¸ í† í°
       ========================================= */
    :root {
      --primary: #4E46E5;       
      --primary-light: #EEF2FF; 
      --bg-app: #F8FAFC;        
      --bg-surface: #FFFFFF;    
      --text-main: #0F172A;     
      --text-sub: #64748B;      
      --border: #E2E8F0;        
      --radius-md: 12px;        
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
    
    body { background-color: #eee; display: flex; justify-content: center; min-height: 100vh; }

    .app-container {
      width: 100%; max-width: 420px;
      background-color: var(--bg-app);
      position: relative; min-height: 100vh;
      padding-bottom: 100px;
      box-shadow: 0 0 30px rgba(0,0,0,0.1);
    }

    /* í—¤ë” */
    header {
      padding: 16px 24px; display: flex; align-items: center; justify-content: space-between;
      background: var(--bg-surface); border-bottom: 1px solid var(--border);
      position: sticky; top: 0; z-index: 50;
    }
    .page-title { font-size: 18px; font-weight: 700; color: var(--text-main); }
    .back-btn { font-size: 24px; cursor: pointer; color: var(--text-main); }

    /* ì„¹ì…˜ ê³µí†µ */
    .section {
      background: var(--bg-surface); margin-bottom: 12px; padding: 24px 20px;
    }
    .section-title { font-size: 16px; font-weight: 700; margin-bottom: 16px; color: var(--text-main); }
    .label { font-size: 13px; font-weight: 600; color: var(--text-sub); margin-bottom: 8px; display: block; }

    /* [ë³µêµ¬ë¨] êµ¬ê°„ íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼ */
    .route-container { position: relative; }
    .route-line {
      position: absolute; left: 14px; top: 20px; bottom: 20px;
      width: 2px; background: #E2E8F0; z-index: 0;
    }
    .route-item { position: relative; z-index: 1; margin-bottom: 30px; }
    .route-item:last-child { margin-bottom: 0; }
    
    .dot {
      width: 30px; height: 30px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px; font-weight: 700; color: white;
      position: absolute; left: 0; top: 4px;
    }
    .dot.start { background: var(--primary); }
    .dot.end { background: var(--text-main); }
    
    .route-inputs { margin-left: 42px; }
    
    /* ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ */
    .addr-btn {
      width: 100%; height: 48px; border: 1px solid var(--border); border-radius: var(--radius-md);
      background: #F8FAFC; text-align: left; padding: 0 16px;
      color: var(--text-main); font-size: 15px; font-weight: 500;
      margin-bottom: 8px; cursor: pointer; display: flex; align-items: center; justify-content: space-between;
    }

    /* í† ê¸€/ê·¸ë¦¬ë“œ ë²„íŠ¼ */
    .toggle-group { display: flex; gap: 6px; }
    .toggle-btn {
      flex: 1; height: 38px; border: 1px solid var(--border); border-radius: 8px;
      font-size: 13px; color: var(--text-sub); background: white; cursor: pointer;
    }
    .toggle-btn.selected { background: var(--primary); color: white; border-color: var(--primary); font-weight: 600; }

    .grid-options { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 16px; }
    .grid-btn {
      height: 42px; border: 1px solid var(--border); border-radius: 8px;
      font-size: 13px; color: var(--text-sub); background: white; cursor: pointer;
    }
    .grid-btn.selected { border-color: var(--primary); color: var(--primary); background: #EEF2FF; font-weight: 700; }

    /* ì…ë ¥ í•„ë“œ */
    .input-field {
      width: 100%; height: 48px; padding: 0 16px;
      border: 1px solid var(--border); border-radius: var(--radius-md); font-size: 15px; background: white;
    }
    .input-row { display: flex; gap: 10px; margin-bottom: 16px; }

    /* ì‚¬ì§„ ì²¨ë¶€ */
    .photo-upload-area { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 8px; }
    .photo-btn {
      width: 80px; height: 80px; flex-shrink: 0;
      border: 1px dashed #CBD5E1; border-radius: 12px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      color: var(--text-sub); font-size: 12px; cursor: pointer;
    }

    /* ë°°ì°¨ ë°©ì‹ ì¹´ë“œ */
    .dispatch-method-box { display: flex; gap: 10px; margin-bottom: 20px; }
    .method-card {
      flex: 1; padding: 16px; border: 1px solid var(--border); border-radius: 12px;
      cursor: pointer; transition: 0.2s; background: white;
    }
    .method-card.selected {
      border-color: var(--primary); background: #EEF2FF; box-shadow: 0 4px 10px rgba(78, 70, 229, 0.1);
    }
    .method-icon { font-size: 24px; margin-bottom: 8px; display: block; }
    .method-title { font-weight: 700; font-size: 15px; margin-bottom: 4px; color: var(--text-main); }
    .method-desc { font-size: 12px; color: var(--text-sub); line-height: 1.4; }

    /* AI ì¶”ì²œ ìš´ì„ */
    .recommend-box {
      background: #EEF2FF; border: 1px solid #C7D2FE;
      border-radius: var(--radius-md); padding: 16px;
      margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;
    }
    .rec-label { font-size: 12px; color: var(--primary); margin-bottom: 4px; font-weight: 600; }
    .rec-price { font-size: 18px; font-weight: 800; color: var(--primary); }
    .btn-apply {
      background: var(--primary); color: white;
      padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600;
      border: none; cursor: pointer; box-shadow: 0 2px 4px rgba(78, 70, 229, 0.2);
    }

    /* [ìˆ˜ì •ë¨] ìš”ê¸ˆ ê³„ì‚° ì˜ì—­ (ë””ìì¸ ê¹¨ì§ ë°©ì§€) */
    .cost-box { background: #F8FAFC; border-radius: var(--radius-md); padding: 20px; }
    
    .cost-row { 
      display: flex; justify-content: space-between; align-items: center; 
      margin-bottom: 12px; font-size: 14px; width: 100%;
    }
    
    .cost-row.total { 
      margin-top: 16px; pt: 16px; border-top: 1px solid #E2E8F0; 
      font-weight: 700; font-size: 18px; color: var(--text-main);
    }
    
    /* ê¸ˆì•¡ ì…ë ¥ì°½ ë˜í¼ */
    .price-input-wrap {
      display: flex; align-items: center; justify-content: flex-end; gap: 4px;
    }
    .input-price {
      text-align: right; border: none; background: transparent; 
      font-size: 20px; font-weight: 700; color: var(--text-main); 
      width: 120px; /* ê³ ì • ë„ˆë¹„ë¡œ ë ˆì´ì•„ì›ƒ ìœ ì§€ */
      border-bottom: 1px solid var(--border); padding-bottom: 4px;
    }
    .input-price:focus { border-color: var(--primary); outline: none; }

    /* í•˜ë‹¨ ë²„íŠ¼ */
    .bottom-fixed {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: white; border-top: 1px solid var(--border);
      padding: 16px 20px; z-index: 100; display: flex; justify-content: center;
    }
    /* [ìˆ˜ì •ë¨] ë²„íŠ¼ ìƒ‰ìƒ ë©”ì¸ ì»¬ëŸ¬ë¡œ ë³€ê²½ */
    .btn-submit {
      width: 100%; max-width: 380px; height: 56px;
      background: var(--primary); color: white;
      border-radius: var(--radius-md);
      font-size: 17px; font-weight: 700; border: none; cursor: pointer;
      box-shadow: 0 4px 15px rgba(78, 70, 229, 0.3);
    }

  </style>
</head>
<body>

  <div class="app-container">
    
    <header>
      <i class="ph ph-arrow-left back-btn" onclick="history.back()"></i>
      <div class="page-title">í™”ë¬¼ ë“±ë¡</div>
      <div style="width: 24px;"></div>
    </header>

    <section class="section">
      <div class="section-title">êµ¬ê°„ ë° ì¼ì‹œ</div>
      <div class="route-container">
        <div class="route-line"></div>
        
        <div class="route-item">
          <div class="dot start">ì¶œë°œ</div>
          <div class="route-inputs">
            <div class="label">ìƒì°¨ì§€ ì •ë³´</div>
            <button class="addr-btn" onclick="alert('ì£¼ì†Œ ê²€ìƒ‰ API')">
              <span>ìµœê·¼: ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ...</span>
              <i class="ph ph-caret-down"></i>
            </button>
            
            <div class="toggle-group" id="startDateGroup" style="margin-top: 8px;">
              <button class="toggle-btn selected" onclick="selectToggle('startDateGroup', this)">ë‹¹ìƒ(ì˜¤ëŠ˜)</button>
              <button class="toggle-btn" onclick="selectToggle('startDateGroup', this)">ìµìƒ(ë‚´ì¼)</button>
              <button class="toggle-btn" onclick="selectToggle('startDateGroup', this)">ë‚ ì§œì§€ì •</button>
            </div>
          </div>
        </div>

        <div class="route-item">
          <div class="dot end">ë„ì°©</div>
          <div class="route-inputs">
            <div class="label">í•˜ì°¨ì§€ ì •ë³´</div>
            <button class="addr-btn" onclick="alert('ì£¼ì†Œ ê²€ìƒ‰ API')">
              <span style="color:#94A3B8">ì£¼ì†Œë¥¼ ê²€ìƒ‰í•´ì£¼ì„¸ìš”</span>
              <i class="ph ph-magnifying-glass"></i>
            </button>
            
            <div class="toggle-group" id="endDateGroup" style="margin-top: 8px;">
              <button class="toggle-btn selected" onclick="selectToggle('endDateGroup', this)">ë‹¹ì°©</button>
              <button class="toggle-btn" onclick="selectToggle('endDateGroup', this)">ìµì°©</button>
              <button class="toggle-btn" onclick="selectToggle('endDateGroup', this)">ë‚´ì°©</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="section-title">ì°¨ëŸ‰ ë° í™”ë¬¼ ì •ë³´</div>
      
      <div class="label">í†¤ìˆ˜</div>
      <div class="grid-options" style="grid-template-columns: repeat(5, 1fr);" id="tonnageGroup">
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">1t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">1.4t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">2.5t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">3.5t</button>
        <button class="grid-btn selected" onclick="selectGrid('tonnageGroup', this)">5t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">5ì¶•</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">11t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">18t</button>
        <button class="grid-btn" onclick="selectGrid('tonnageGroup', this)">25t</button>
      </div>

      <div class="label">ì°¨ì¢…</div>
      <div class="grid-options" id="carTypeGroup">
        <button class="grid-btn" onclick="selectGrid('carTypeGroup', this)">ì¹´ê³ </button>
        <button class="grid-btn selected" onclick="selectGrid('carTypeGroup', this)">ìœ™ë°”ë””</button>
        <button class="grid-btn" onclick="selectGrid('carTypeGroup', this)">íƒ‘ì°¨</button>
        <button class="grid-btn" onclick="selectGrid('carTypeGroup', this)">ì¶•ì°¨</button>
      </div>

      <div class="input-row">
        <div style="flex: 2;">
          <div class="label">ë¬¼í’ˆ ìƒì„¸</div>
          <input type="text" class="input-field" placeholder="ì˜ˆ: íŒŒë ˆíŠ¸ 2ê°œ, ë°•ìŠ¤ì§">
        </div>
        <div style="flex: 1;">
          <div class="label">ì¤‘ëŸ‰(í†¤)</div>
          <input type="number" class="input-field" placeholder="0">
        </div>
      </div>

      <div class="label">ì‚¬ì§„ ì²¨ë¶€ (ì„ íƒ)</div>
      <div class="photo-upload-area">
        <div class="photo-btn">
          <i class="ph ph-camera"></i>
          <span>ì‚¬ì§„ ì¶”ê°€</span>
        </div>
        <div class="photo-btn" style="background: #F1F5F9; border: none;">
          <i class="ph ph-image" style="color: #94A3B8;"></i>
          <span>IMG_01</span>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="section-title">ë°°ì°¨ ë° ìš´ì„</div>

      <div class="label" style="color: var(--primary);">ë°°ì°¨ ë°©ì‹ ì„ íƒ</div>
      <div class="dispatch-method-box">
        <div class="method-card selected" onclick="selectDispatchMethod(this)">
          <span class="method-icon">âš¡</span>
          <div class="method-title">ë°”ë¡œ ë°°ì°¨</div>
          <div class="method-desc">ê¸°ì‚¬ë‹˜ì´ ìˆ˜ë½í•˜ë©´ ì¦‰ì‹œ ë°°ì°¨ë©ë‹ˆë‹¤. (ë¹ ë¦„)</div>
        </div>
        <div class="method-card" onclick="selectDispatchMethod(this)">
          <span class="method-icon">ğŸ‘‘</span>
          <div class="method-title">ì§ì ‘ ë°°ì°¨</div>
          <div class="method-desc">ì§€ì›í•œ ê¸°ì‚¬ë‹˜ì˜ í‰ì ì„ ë³´ê³  ì„ íƒí•©ë‹ˆë‹¤.</div>
        </div>
      </div>

      <div class="recommend-box">
        <div>
          <div class="rec-label">AI ì¶”ì²œ ìš´ì„ (ê±°ë¦¬ 340km)</div>
          <div class="rec-price" id="recPriceDisplay">320,000 ì›</div>
        </div>
        <button class="btn-apply" onclick="applyRecommend()">ì ìš©í•˜ê¸°</button>
      </div>

      <div class="label">ê²°ì œ ë°©ë²•</div>
      <div class="toggle-group" style="margin-bottom: 20px;" id="payGroup">
        <button class="toggle-btn selected" data-fee="0" onclick="changePayMethod(this)">ì¸ìˆ˜ì¦/ì°©ë¶ˆ</button>
        <button class="toggle-btn" data-fee="0.1" onclick="changePayMethod(this)">ì¹´ë“œ ê²°ì œ</button>
      </div>

      <div class="cost-box">
        <div class="cost-row">
          <span style="font-weight: 600;">í¬ë§ ìš´ì„</span>
          <div class="price-input-wrap">
            <input type="tel" class="input-price" id="priceBase" value="0" onkeyup="calculateTotal()" placeholder="0">
            <span style="font-weight: 700; font-size: 16px;">ì›</span>
          </div>
        </div>
        
        <div class="cost-row" style="color: var(--text-sub);">
          <span>ìˆ˜ìˆ˜ë£Œ (10%)</span>
          <span id="priceFee">+ 0 ì›</span>
        </div>

        <div style="border-top: 1px solid #E2E8F0; margin: 12px 0;"></div>

        <div class="cost-row total">
          <span>ìµœì¢… ê²°ì œ ê¸ˆì•¡</span>
          <span id="priceTotal">0 ì›</span>
        </div>
      </div>
    </section>

    <div class="bottom-fixed">
      <button class="btn-submit" onclick="alert('í™”ë¬¼ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!')">í™”ë¬¼ ë“±ë¡í•˜ê¸°</button>
    </div>

  </div>

  <script>
    // 1. ê·¸ë¦¬ë“œ/í† ê¸€ ë²„íŠ¼ ì„ íƒ
    function selectGrid(groupId, btn) {
      const buttons = document.getElementById(groupId).getElementsByClassName('grid-btn');
      for (let b of buttons) b.classList.remove('selected');
      btn.classList.add('selected');
    }
    function selectToggle(groupId, btn) {
        const buttons = document.getElementById(groupId).getElementsByClassName('toggle-btn');
        for (let b of buttons) b.classList.remove('selected');
        btn.classList.add('selected');
    }

    // 2. ë°°ì°¨ ë°©ì‹ ì„ íƒ
    function selectDispatchMethod(card) {
      const cards = document.querySelectorAll('.method-card');
      cards.forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
    }

    // 3. ì¶”ì²œ ìš´ì„ ì ìš©
    const AI_RECOMMENDED_PRICE = 320000;
    function applyRecommend() {
      const input = document.getElementById('priceBase');
      input.value = AI_RECOMMENDED_PRICE.toLocaleString();
      calculateTotal();
      input.style.borderColor = '#4E46E5';
      setTimeout(() => input.style.borderColor = '#E2E8F0', 500);
    }

    // 4. ê²°ì œ ë° ê³„ì‚° ë¡œì§
    let currentFeeRate = 0; 
    function changePayMethod(btn) {
      selectToggle('payGroup', btn);
      currentFeeRate = parseFloat(btn.getAttribute('data-fee'));
      calculateTotal();
    }

    function calculateTotal() {
      const input = document.getElementById('priceBase');
      const feeDisplay = document.getElementById('priceFee');
      const totalDisplay = document.getElementById('priceTotal');

      let rawValue = input.value.replace(/,/g, '');
      let price = parseInt(rawValue) || 0;

      input.value = price.toLocaleString();

      let fee = Math.floor(price * currentFeeRate);
      let total = price + fee;

      feeDisplay.innerText = '+ ' + fee.toLocaleString() + ' ì›';
      totalDisplay.innerText = total.toLocaleString() + ' ì›';
    }
  </script>

</body>
</html>